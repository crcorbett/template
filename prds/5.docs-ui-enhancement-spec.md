Enhance the docs app with improved code snippet UI, architectural diagrams, and Fumadocs best practices. Research shadcn, Fumadocs examples, and implement file-like code displays, React diagram components, and proper Turbo command usage. Then write DONE into the record.

--completion-promise=DONE

---

## Overview

Improve the documentation site UX by:

1. Enhancing code snippet presentation to show full files with proper context (like shadcn)
2. Creating React components for architectural diagrams of the monorepo
3. Ensuring all CLI examples use `turbo` commands with `--filter` for caching benefits
4. Leveraging Fumadocs features discovered through research

This PRD is **research-heavy** - the ralph-loop should conduct research, document findings in this spec, and extend the task list as it discovers implementation opportunities.

## Research Areas

### 1. Shadcn Code Display Patterns

- How does shadcn display full configuration files?
- What UI patterns make code feel like "real files"?
- File tabs, copy buttons, filename headers?

### 2. Fumadocs Code Features

- Explore `.context/fumadocs/` for code block examples
- What built-in components exist for code display?
- Custom MDX components for enhanced code presentation

### 3. Diagram/Visualisation Options

- Mermaid diagrams in MDX
- Custom React components for architecture diagrams
- Interactive visualisations

### 4. Turbo Command Best Practices

- Audit existing docs for `bun run` vs `turbo run`
- Document `--filter` patterns
- Show caching benefits

## Goals

- [x] Code snippets display like IDE file tabs with full file context
- [x] Architecture diagrams visualise monorepo structure
- [x] All CLI examples use proper Turbo commands
- [x] Custom MDX components for enhanced presentation

## Research Findings

### Shadcn Findings

Shadcn/ui uses several patterns for code display that make snippets feel like "real files":

1. **Title attribute** - Markdown code blocks support `title="filename.tsx"` to show file headers
2. **showLineNumbers** - Adds line numbers resembling an IDE
3. **Tabbed code displays** - Uses `<CodeTabs>`, `<TabsList>`, `<TabsTrigger>`, `<TabsContent>` for multiple code variations (e.g., CLI vs Manual)
4. **Copy buttons** - `BlockCopyCodeButton` component with `useCopyToClipboard` hook
5. **Line highlighting** - Uses `{}` syntax to highlight specific lines
6. **ComponentSource** - Shows actual component source code with file headers

**Key UI pattern**: File-like presentation with filename header, line numbers, and copy button.

### Fumadocs Code Block Features

Fumadocs has excellent built-in code block features already available:

1. **Title attribute** - `title="filename.tsx"` syntax is already supported
2. **Line numbers** - `lineNumbers` or `lineNumbers=4` (with starting line)
3. **Tab groups** - Adjacent code blocks with `tab="Tab Name"` auto-group into tabs
4. **Shiki transformers** supported:
   - `// [!code highlight]` - Highlight a line
   - `// [!code word:keyword]` - Highlight specific words
   - `// [!code --]` and `// [!code ++]` - Diff styles
   - `// [!code focus]` - Focus a line
5. **NPM command blocks** - `npm` language auto-generates bun/npm/pnpm/yarn tabs
6. **Include directive** - `<include>./file.mdx</include>` for reusing content

**Current setup**: The docs already use `defaultMdxComponents` from `fumadocs-ui/mdx` which provides these features. No additional setup needed.

### Diagram Options

Fumadocs supports Mermaid diagrams via a custom component:

1. **Setup required**:
   - Install `mermaid` and `next-themes`
   - Create `<Mermaid chart="..." />` component
   - Register in MDX components
   - Optionally use `remarkMdxMermaid` plugin for code block syntax

2. **Usage options**:
   - JSX: `<Mermaid chart="graph TD; A-->B" />`
   - Code block (with plugin): ` ```mermaid\ngraph TD; A-->B\n``` `

3. **Diagram types available**:
   - Flowcharts (`graph TD/LR`)
   - User journeys (`journey`)
   - Sequence diagrams
   - Class diagrams
   - All standard Mermaid types

### Turbo Command Audit Results

**Current state**: The docs already use `bun turbo` commands properly in most places.

**Files with `bun run` that could use turbo**:

- `tooling/index.mdx` - Lines 26, 29, 32-33, 36, 49, 76, 79 use `bun run dev/build/check`
- `getting-started/first-steps.mdx` - Uses `bun run dev`
- Some files use `bun run` correctly for non-turbo scripts

**Note**: `bun run dev` and `bun run build` in root package.json delegate to turbo, so these are acceptable. The docs could clarify this relationship better.

## Implementation Notes

### Code Block Enhancements

1. **Add titles to all code blocks** - Use `title="filename.ext"` for any code showing file contents
2. **Use tab groups** - Group related code blocks (e.g., different package managers)
3. **Enable line numbers** - For longer code examples
4. **Use highlighting** - Draw attention to important lines with `[!code highlight]`

### Mermaid Setup Required

1. Create `src/components/mdx/mermaid.tsx` component
2. Add to MDX components in `src/routes/docs/$.tsx`
3. Update `source.config.ts` to add `remarkMdxMermaid` plugin (optional)

### Diagrams to Create

1. **Workspace structure** - Show apps/ and packages/ relationship
2. **Dependency graph** - Visualize package dependencies
3. **Build pipeline** - Show how turbo orchestrates builds
4. **CI/CD flow** - GitHub Actions workflow visualization

---

## Commit Policy

Commit after each completed task using conventional commit format:

- `docs:` for documentation changes
- `feat:` for new components/features
- `refactor:` for command updates
